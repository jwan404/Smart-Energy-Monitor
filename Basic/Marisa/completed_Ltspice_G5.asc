Version 4
SHEET 1 1700 1364
WIRE -320 -976 -480 -976
WIRE 624 -976 -320 -976
WIRE 720 -976 624 -976
WIRE -1472 -832 -1536 -832
WIRE -1392 -832 -1472 -832
WIRE -1312 -832 -1328 -832
WIRE -1200 -832 -1232 -832
WIRE -1168 -832 -1200 -832
WIRE -1088 -832 -1168 -832
WIRE -752 -832 -832 -832
WIRE -592 -832 -752 -832
WIRE -528 -832 -592 -832
WIRE -480 -832 -480 -976
WIRE -480 -832 -528 -832
WIRE -352 -832 -480 -832
WIRE -528 -720 -528 -832
WIRE -480 -720 -480 -832
WIRE -1168 -672 -1168 -832
WIRE -752 -672 -752 -832
WIRE -480 -624 -480 -640
WIRE 368 -624 -480 -624
WIRE -480 -608 -480 -624
WIRE -1168 -512 -1168 -608
WIRE -1168 -512 -1632 -512
WIRE -960 -512 -960 -736
WIRE -960 -512 -1168 -512
WIRE -752 -512 -752 -608
WIRE -752 -512 -960 -512
WIRE -528 -512 -528 -640
WIRE -528 -512 -752 -512
WIRE -480 -512 -480 -528
WIRE -480 -512 -528 -512
WIRE 1216 -272 16 -272
WIRE -800 -208 -1072 -208
WIRE -576 -208 -592 -208
WIRE -464 -208 -496 -208
WIRE -320 -160 -320 -976
WIRE -320 -160 -528 -160
WIRE -704 -144 -768 -144
WIRE -592 -144 -592 -208
WIRE -592 -144 -624 -144
WIRE -528 -144 -528 -160
WIRE -592 -128 -592 -144
WIRE -560 -128 -592 -128
WIRE -528 -128 -528 -144
WIRE 720 -128 720 -976
WIRE -1536 -112 -1536 -832
WIRE -1392 -112 -1536 -112
WIRE -1200 -112 -1392 -112
WIRE -944 -112 -1200 -112
WIRE -464 -112 -464 -208
WIRE -464 -112 -496 -112
WIRE -432 -112 -464 -112
WIRE -112 -112 -432 -112
WIRE 16 -112 16 -272
WIRE 16 -112 -32 -112
WIRE 80 -112 16 -112
WIRE 432 -112 80 -112
WIRE 688 -112 512 -112
WIRE -560 -96 -592 -96
WIRE 944 -96 752 -96
WIRE -1200 -80 -1200 -112
WIRE -800 -80 -800 -208
WIRE -736 -80 -800 -80
WIRE -704 -80 -736 -80
WIRE -592 -80 -592 -96
WIRE -592 -80 -624 -80
WIRE 16 -80 16 -112
WIRE 432 -80 432 -112
WIRE 688 -80 432 -80
WIRE -944 -64 -944 -112
WIRE -592 -64 -592 -80
WIRE -528 -48 -528 -80
WIRE -272 -48 -528 -48
WIRE -1536 32 -1536 -112
WIRE -1200 32 -1200 0
WIRE 512 32 512 -112
WIRE -592 80 -592 16
WIRE 368 80 368 -624
WIRE 368 80 -592 80
WIRE -944 96 -944 16
WIRE -832 96 -944 96
WIRE -816 96 -832 96
WIRE 16 128 16 -16
WIRE 16 128 -208 128
WIRE -944 144 -944 96
WIRE -1200 160 -1200 112
WIRE -1088 160 -1200 160
WIRE -1072 160 -1072 -208
WIRE -1072 160 -1088 160
WIRE -1200 176 -1200 160
WIRE -480 208 -496 208
WIRE -368 208 -400 208
WIRE 1328 224 96 224
WIRE 720 240 720 -64
WIRE 848 240 720 240
WIRE 624 256 624 -976
WIRE 704 256 624 256
WIRE -608 272 -688 272
WIRE -496 272 -496 208
WIRE -496 272 -528 272
WIRE -352 272 -352 -832
WIRE -352 272 -432 272
WIRE -496 288 -496 272
WIRE -464 288 -496 288
WIRE 704 288 704 256
WIRE -368 304 -368 208
WIRE -368 304 -400 304
WIRE -336 304 -368 304
WIRE -32 304 -336 304
WIRE 96 304 96 224
WIRE 96 304 48 304
WIRE 160 304 96 304
WIRE 672 304 608 304
WIRE -464 320 -496 320
WIRE 1040 320 736 320
WIRE -816 336 -816 96
WIRE -640 336 -816 336
WIRE -608 336 -640 336
WIRE -496 336 -496 320
WIRE -496 336 -528 336
WIRE 96 336 96 304
WIRE 160 336 160 304
WIRE 672 336 160 336
WIRE -496 352 -496 336
WIRE -496 528 -496 432
WIRE 368 528 368 80
WIRE 368 528 -496 528
WIRE -1632 624 -1632 -512
WIRE -1536 624 -1536 112
WIRE -1536 624 -1632 624
WIRE -1200 624 -1200 256
WIRE -1200 624 -1536 624
WIRE -944 624 -944 224
WIRE -944 624 -1200 624
WIRE -768 624 -768 -144
WIRE -768 624 -944 624
WIRE -688 624 -688 272
WIRE -688 624 -768 624
WIRE -432 624 -432 336
WIRE -432 624 -688 624
WIRE -272 624 -272 -48
WIRE -272 624 -432 624
WIRE -208 624 -208 128
WIRE -208 624 -272 624
WIRE 96 624 96 400
WIRE 96 624 -208 624
WIRE 512 624 512 112
WIRE 512 624 96 624
WIRE 608 624 608 304
WIRE 608 624 512 624
WIRE 704 624 704 352
WIRE 704 624 608 624
WIRE 848 624 848 240
WIRE 848 624 704 624
WIRE 1216 624 848 624
WIRE -1200 768 -1200 624
FLAG -1392 -112 Vac
FLAG -1088 160 Vis
FLAG -832 96 Vvs
FLAG -736 -80 Vis
FLAG -432 -112 Vio
FLAG -432 272 5V
FLAG -640 336 Vvs
FLAG -336 304 Vvo
FLAG -1472 -832 Vac
FLAG -592 -832 5VDis
FLAG -1200 -832 Vin
FLAG -96 288 Vopamp
FLAG 160 304 Vfilter
FLAG -160 -144 Vopamp
FLAG 80 -112 Vfilter
FLAG -1200 768 0
SYMBOL voltage -1536 16 R0
WINDOW 0 24 96 Left 2
WINDOW 3 22 124 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vsupply1
SYMATTR Value SINE(0 17.82 500)
SYMBOL res -1216 16 R0
SYMATTR InstName Rload1
SYMATTR Value 25
SYMBOL ind -1216 -96 R0
SYMATTR InstName Lload1
SYMATTR Value 4mH
SYMBOL res -1216 160 R0
SYMATTR InstName Rs1
SYMATTR Value 0.5645
SYMBOL res -960 -80 R0
SYMATTR InstName Ra
SYMATTR Value 2.08k
SYMBOL res -960 128 R0
SYMATTR InstName Rb1
SYMATTR Value 0.1k
SYMBOL Opamps/opamp2 -528 -176 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U1
SYMATTR Value LM324
SYMBOL res -608 -96 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName R1d
SYMATTR Value 1k
SYMBOL res -608 -160 R90
WINDOW 0 -58 59 VBottom 2
WINDOW 3 -32 55 VTop 2
SYMATTR InstName R1c
SYMATTR Value 1k
SYMBOL res -480 -224 R90
WINDOW 0 -30 61 VBottom 2
WINDOW 3 -31 62 VTop 2
SYMATTR InstName R2a
SYMATTR Value 2.1044k
SYMBOL res -576 32 R180
WINDOW 0 -62 57 Left 2
WINDOW 3 -102 27 Left 2
SYMATTR InstName R2b
SYMATTR Value 2.1044k
SYMBOL Opamps/opamp2 -432 240 R0
WINDOW 0 23 81 Left 2
WINDOW 3 24 105 Left 2
SYMATTR InstName U2
SYMATTR Value LM324
SYMBOL res -512 320 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName R1b
SYMATTR Value 1.205k
SYMBOL res -512 256 R90
WINDOW 0 -32 53 VBottom 2
WINDOW 3 -32 55 VTop 2
SYMATTR InstName R1a
SYMATTR Value 1.3k
SYMBOL res -384 192 R90
WINDOW 0 -30 61 VBottom 2
WINDOW 3 -31 62 VTop 2
SYMATTR InstName R3a
SYMATTR Value 1.4314k
SYMBOL res -480 448 R180
WINDOW 0 -62 57 Left 2
WINDOW 3 -96 22 Left 2
SYMATTR InstName R3b
SYMATTR Value 1.4314k
SYMBOL PowerProducts/LT1085-5 -960 -832 R0
SYMATTR InstName Reg1
SYMBOL res -496 -736 R0
SYMATTR InstName R5
SYMATTR Value 2.7k
SYMBOL res -1216 -848 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rin1
SYMATTR Value 33
SYMBOL diode -1392 -816 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value 1N4148
SYMBOL cap -1184 -672 R0
SYMATTR InstName Cin1
SYMATTR Value 47µ
SYMATTR SpiceLine Rser=0.001
SYMBOL cap -768 -672 R0
SYMATTR InstName Cout1
SYMATTR Value 10µ
SYMATTR SpiceLine Rser=0.001
SYMBOL res 64 288 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName Rf2
SYMATTR Value 15.9155k
SYMBOL cap 112 400 R180
WINDOW 0 29 13 Left 2
WINDOW 3 33 -11 Left 2
SYMATTR InstName Cf1
SYMATTR Value 1nF
SYMBOL OpAmps\\opamp2 720 -160 R0
SYMATTR InstName U3
SYMATTR Value LM324
SYMBOL voltage 512 16 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vref
SYMATTR Value 0
SYMBOL res -16 -128 R90
WINDOW 0 62 55 VBottom 2
WINDOW 3 61 57 VTop 2
SYMATTR InstName Rf1
SYMATTR Value 15.9155k
SYMBOL cap 32 -16 R180
WINDOW 0 29 13 Left 2
WINDOW 3 33 -11 Left 2
SYMATTR InstName Cf2
SYMATTR Value 1nF
SYMBOL res -496 -624 R0
SYMATTR InstName R4
SYMATTR Value 2.2k
SYMBOL OpAmps\\opamp2 704 256 R0
SYMATTR InstName INT_vs
SYMATTR Value LM324
SYMBOL res -544 -736 R0
SYMATTR InstName R1
SYMATTR Value 100
TEXT -1248 -72 Right 2 ;Load \n(2.5VA-7.5VA)
TEXT -1248 216 Right 2 ;Current Sens \n(Pmax=?)
TEXT -1000 -184 Left 2 ;Voltage Sens\n(Vvs(max)=?)
TEXT 1120 -296 Left 2 ;ADC_is
TEXT 1160 200 Left 2 ;ADC_vs
TEXT -1632 792 Left 2 !;tran 0.4
TEXT 592 -1264 Left 2 ;.ac dec 30 1 1Meg
TEXT 592 -1328 Left 2 !.lib LM324.lib
TEXT 584 -1392 Left 2 ;Simulation Commands\n- Change these as needed
TEXT 592 -1296 Left 2 !.tran 0 20m 0 0.05m
TEXT 592 -1232 Left 2 !.ic V(Vin)=8
RECTANGLE Normal -996 -140 -860 296 2
RECTANGLE Normal -1240 -100 -1108 128 2
RECTANGLE Normal -1240 152 -1108 264 2
RECTANGLE Normal 552 -1408 988 -1204 2
